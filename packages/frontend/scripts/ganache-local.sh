#!/bin/bash

# prerequisites: 
# 1) node.js
# 2) npm install ganache --global
#set -e

#FORK_ETH_NODE_URI="https://scn1.equilab.io/eth/mainnet/rpc/"
#FORK_ETH_NODE_URI="https://rpc.ankr.com/eth"

#BLOCK_NUMBER_HEX=$(curl -X POST --header "Content-Type: application/json" --data '{"jsonrpc":"2.0","method":"eth_getBlockByNumber","params":["latest", false],"id":1}' "$FORK_ETH_NODE_URI" | jq '.result.number' | tr -d '"')
#BLOCK_NUMBER=$((16#${BLOCK_NUMBER_HEX##0x}))

# ganache --fork "$FORK_ETH_NODE_URI"@"$BLOCK_NUMBER" -l 10000000 -e 10000000000000\
#  --wallet.unlockedAccounts '0x28c6c06298d514db089934071355e5743bf21d60'\
#  --wallet.unlockedAccounts '0xFcb19e6a322b27c06842A71e8c725399f049AE3a'\
#  --wallet.unlockedAccounts '0xBE0eB53F46cd790Cd13851d5EFf43D12404d33E8'\
#  --account "0xc7bffcab03bc10eb939f5a4ef3349cf9ff038d078d1eb70762624f6c52266651,10000000000000000000000000000"\
#  --account "0x7ac357cb337689afc51fa1d579a54053536247d14e0c15933fca2ce58ba7878e,100000000000000000000"\
#  --account "0x3123a2f2029043aa2f3aacad8d90718e5bc83329b89f112b78779f96eae904f0,100000000000000000000"\
#  --account "0x9ea467745000106e691ceb44d81ffee9122697ee1fb9d96c0b55c041a5b2a0fe,100000000000000000000"\
#  --account "0x1f99e5633484fc4e7dbf002b65607cd0866f040ab29fc88d1b2dc81d0a1535f2,100000000000000000000"\
#  --account "0x98129bd3d0106a70fc62f92eb8a9099d8051636d1696d5c83e849e3447f48e02,100000000000000000000"\
#  --account "0xf5edf870963e932b2f0a490e0145f423f1b12309ebc6bf2ffc22226fcd6af2b7,100000000000000000000"\
#  --account "0x80f972731640eca219bb43adad061c67514440c06e4e242706fff87ef1c2e1b4,100000000000000000000"\
#  --account "0xc6c6258a9714fd6f9d8f852c4a13c8d5a8e8e6a8e6db915ba315c0cb29a19229,100000000000000000000"\
#  --account "0x33c2560025b4fd59bdc4380f1e300fe2f1c48d97e0a90cec04ca2759ca4e3120,100000000000000000000"\
#  --account "0x58f77fb63ab9be2ca76fd2a6a70d227517a3cf6616e26271411c5136026cac21,100000000000000000000"\
#  --account "0xfd56231c23964903c3fd095a35e99ced43e296791920cce0bdd4f47c50a6651a,100000000000000000000"\
#  --account "0xa54df3e0323e56c5cddcf9ec80747efaba70c340122a29514a75e2119f32559f,100000000000000000000"\
#  --account "0x676d5992be4528905cae268555614fe8173e6c6250876269a4f4ec31071c774e,100000000000000000000"\
#  --account "0xb5f73fb0e4c7a305f0832d18753aca6c8a50f6fe49de6f1b5f616962f250e304,100000000000000000000"\
#  --account "0xbc8dcbf0528c84bfb34827fb3fe1b712bb1f865606be6d34094937824a75c3c0,100000000000000000000"


docker run --publish 8545:8545 trufflesuite/ganache-cli:latest --fork "https://rpc.ankr.com/eth" \
--chainId 1337 \
-l 10000000 \
--unlock '0x28c6c06298d514db089934071355e5743bf21d60' \
--unlock '0xFcb19e6a322b27c06842A71e8c725399f049AE3a' \
--unlock '0xBE0eB53F46cd790Cd13851d5EFf43D12404d33E8' \
--account '0xc7bffcab03bc10eb939f5a4ef3349cf9ff038d078d1eb70762624f6c52266651,10000000000000000000000000000' \
--account "0x7ac357cb337689afc51fa1d579a54053536247d14e0c15933fca2ce58ba7878e,100000000000000000000" \
--account "0x3123a2f2029043aa2f3aacad8d90718e5bc83329b89f112b78779f96eae904f0,100000000000000000000" \
--account "0x9ea467745000106e691ceb44d81ffee9122697ee1fb9d96c0b55c041a5b2a0fe,100000000000000000000" \
--account "0x1f99e5633484fc4e7dbf002b65607cd0866f040ab29fc88d1b2dc81d0a1535f2,100000000000000000000" \
--account "0x98129bd3d0106a70fc62f92eb8a9099d8051636d1696d5c83e849e3447f48e02,100000000000000000000"